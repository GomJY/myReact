<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <title>구구단</title>
</head>

<body>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      class GuGuDan extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            first: Math.ceil(Math.random() * 9),  
            second: Math.ceil(Math.random() * 9),
            value: '',
            result: '',  
          };
        }
        
        //this.onSubmit으로 불러올수 있고 render에 넣는 것보다 더 깔끔하게 코드를 관리할수 있다.
        onSubmit = (e) => {
          e.preventDefault();
          if(parseInt(this.state.value) === this.state.first * this.state.second) {
            // this.setState((prevState) => { ... });
            // 예전 state 값으로 새로운 state에서 참조 해야 할때는 함수에 매개변수를 사용하기
            this.setState((prevState) => { 
              return {
                result: ` 이전 정답[${prevState.value}] 정답!`,
                first: Math.ceil(Math.random() * 9),  
                second: Math.ceil(Math.random() * 9),
                value: '',
              }
            });
          } else {
            this.setState({
              result: '땡',
              value: '',
            });
          }
        };
        
        onChange = (e) => { 
          this.setState({value: e.target.value}) 
        };

        render() {
          return (
            <div>
              <div>{this.state.first}곱하기 { this.state.second }는?</div>
              <form onSubmit={ this.onSubmit }>
                <input type="number" value={this.state.value} onChange={this.onChange}/>
                <button >입력!</button>
              </form>   
              <div>{this.state.result}</div>
            </div> 
          );
        }
      }
    </script>
    <script type="text/babel">
      ReactDOM.render(
        <React.Fragment>
          <GuGuDan/>
        </React.Fragment>
      ,document.querySelector("#root"));
    </script>

    <script>
      /**
       *  this.setState를 사용해서 state를 번경할때 setState()는 비동기 함수 이기 때문에
       *  this.setState( value: this.state.value + 1);
       *  this.setState( value: this.state.value + 1);
       *  this.setState( value: this.state.value + 1); ....
       *  위에 처럼 처도 3이 아닌 1이 나올수 있다. 그렇기 때문에
       *  this.setState((prevState) => { ... });
       *  위처럼 매개변수에 현재 함수에 저장된 현재 매개변수를 사용해서 함수를 만든다.
       **/
    </script>
  </body>

</html>


<!-- 
  
-->
